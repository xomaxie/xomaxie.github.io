<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>FEDoc - Farming Game Engine Documentation</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; margin: 2rem; color: #1a1a1a; }
    h1, h2, h3 { color: #1565c0; }
    table { border-collapse: collapse; width: 100%; margin-bottom: 2rem; }
    th, td { border: 1px solid #bbb; padding: 0.5rem; }
    th { background: #e3f2fd; }
    code { background: #f5f5f5; padding: 2px 4px; border-radius: 4px; }
    hr { margin: 2rem 0; }
  </style>
</head>
<body>
  <h1>FEDoc - Farming Game Engine Documentation</h1>

  <h2>Overview</h2>
  <p>
    Welcome to <strong>FEDoc</strong>, the official documentation for the Farming Game Engine built using <strong>Unreal Engine 5.6</strong> in <strong>C++</strong>.<br>
  </p>
  <hr>

  <h2>Core Systems</h2>

  <h3>Inventory System</h3>
  <ul>
    <li><strong>InventoryComponent</strong>: Manages inventory logic including adding, removing, clearing, and item stacking. Fires events on inventory changes to update UI.</li>
    <li><strong>InventorySlot</strong>: Handles logic for item stacking and updating individual slots.</li>
    <li><strong>InventoryWidget / InventorySlotWidget</strong>: Provides visual representation and interactive UI for inventory management. Supports drag-and-drop item movement, <b>shift-drag splitting</b>, and quick access.</li>
  </ul>

  <h3>Player Character</h3>
  <ul>
    <li><strong>FarmerCharacter</strong>: Central pawn class for the player, integrating input handling for movement, interactions, harvesting, and combat. Utilizes <strong>StatsComponent</strong> for managing player attributes such as health and stamina.</li>
    <li><strong>FarmerController</strong>: Custom controller managing player input, camera systems, and interaction logic.</li>
  </ul>

  <h3>Game Management</h3>
  <ul>
    <li><strong>GM_Farm</strong>: Core gameplay manager responsible for maintaining overall game state, including player spawning and initialization.</li>
  </ul>

  <h3>Items & Resources</h3>
  <ul>
    <li><strong>ItemData</strong>: Data-driven approach defining properties for each in-game item, such as icons, stack limits, and interactions.</li>
    <li><strong>DroppedItem / DroppedTreeLoot</strong>: Represents physical items spawned in-world, collectible by player interaction after harvesting or resource depletion. <b>DroppedItem</b> supports dynamic quantity for bulk drops.</li>
  </ul>

  <h3>Environment & Interaction</h3>
  <ul>
    <li><strong>TreeActor</strong>: Represents trees in-game, serving as harvestable resources. Implements the <code>DamageableInterface</code> to facilitate harvesting mechanics. <b>Supports custom drop amount and drop class via properties.</b></li>
    <li><strong>DamageableInterface</strong>: Standardized interface for destructible or interactive resources, streamlining interaction logic.</li>
  </ul>

  <h3>Player Stats & Damage</h3>
  <ul>
    <li><strong>StatsComponent</strong>: Manages player-specific attributes including health, stamina, damage calculation, and healing. Notifies relevant systems when stats change, enabling dynamic gameplay and UI updates.</li>
  </ul>
  <hr>

  <h2>Class Reference</h2>
  <table>
    <tr>
      <th>Class Name</th>
      <th>Description</th>
    </tr>
    <tr><td><strong>FarmerCharacter</strong></td><td>Player pawn handling core gameplay mechanics.</td></tr>
    <tr><td><strong>FarmerController</strong></td><td>Manages input, camera controls, interactions.</td></tr>
    <tr><td><strong>GM_Farm</strong></td><td>GameMode handling game state and logic.</td></tr>
    <tr><td><strong>InventoryComponent</strong></td><td>Backend inventory management logic.</td></tr>
    <tr><td><strong>InventoryWidget</strong></td><td>Visual inventory UI for player interaction.</td></tr>
    <tr><td><strong>InventorySlotWidget</strong></td><td>UI representation for single inventory slots. Supports drag-and-drop and shift-drag for stack splitting.</td></tr>
    <tr><td><strong>ItemData</strong></td><td>Defines in-game item properties.</td></tr>
    <tr><td><strong>TreeActor</strong></td><td>Harvestable resource actor. Customizable drop amount and actor class. Supports Blueprint drop events.</td></tr>
    <tr><td><strong>DroppedItem</strong></td><td>Generic dropped collectible items, quantity can be set dynamically.</td></tr>
    <tr><td><strong>DroppedTreeLoot</strong></td><td>Specific loot from tree harvesting.</td></tr>
    <tr><td><strong>DamageableInterface</strong></td><td>Interface for destructible resources.</td></tr>
    <tr><td><strong>StatsComponent</strong></td><td>Manages player health, stamina, and effects.</td></tr>
  </table>
  <hr>

  <h2>Blueprint API</h2>

  <h3>UInventoryComponent</h3>
  <ul>
    <li><code>AddItem(FName ItemID, int32 Count, bool bPreferHotbar = false)</code> - Adds an item by ID and count; can prefer hotbar. (Callable)</li>
    <li><code>MoveItem(int32 FromIndex, int32 ToIndex)</code> - Swaps or moves items between slots (drag-and-drop support). (Callable)</li>
    <li><code>ClearSlot(int32 SlotIndex)</code> - Clears the item and count from a given slot (hotbar or main inventory). (Callable)</li>
    <li><code>SetInventorySlot(int32 Index, FName ItemID, int32 Count)</code> - Sets a specific main inventory slot. (Callable)</li>
    <li><code>SetHotbarSlot(int32 Index, FName ItemID, int32 Count)</code> - Sets a specific hotbar slot. (Callable)</li>
    <li><code>GetInventorySlots()</code> - Returns the main inventory slots array. (Callable, returns array)</li>
    <li><code>GetHotbarSlots()</code> - Returns the hotbar slots array. (Callable, returns array)</li>
    <li><code>GetInventorySlot(int32 Index)</code> - Gets data for a single main slot. (Callable, returns struct)</li>
    <li><code>GetHotbarSlot(int32 Index)</code> - Gets data for a single hotbar slot. (Callable, returns struct)</li>
    <li><code>Cheat_AddItem(FName ItemID, int32 Count)</code> - Cheat/debug: Add item instantly. (Callable)</li>
    <li><code>Cheat_ListAllItems()</code> - Cheat/debug: Print all item info to log. (Callable)</li>
    <li><code>InventorySlots</code> - The array of inventory slots. (Read Only, VisibleAnywhere)</li>
    <li><code>HotbarSlots</code> - The array of hotbar slots. (Read Only, VisibleAnywhere)</li>
    <li><code>NumInventorySlots</code> - How many main inventory slots (EditAnywhere)</li>
    <li><code>NumHotbarSlots</code> - How many hotbar slots (EditAnywhere)</li>
    <li><code>ItemDataTable</code> - The items data table. (EditAnywhere)</li>
    <li><code>OnInventoryChanged</code> - Event fired when inventory is changed. (Assignable)</li>
  </ul>

  <h3>FInventorySlot (Struct)</h3>
  <ul>
    <li><code>ItemID</code> - The Item ID (FName) in this slot. (Read/Write)</li>
    <li><code>Count</code> - Number of items in this slot. (Read/Write)</li>
  </ul>

  <h3>UItemData</h3>
  <ul>
    <li><code>Name</code> - Item display name. (Read Only, EditAnywhere)</li>
    <li><code>Icon</code> - Item icon texture. (Read Only, EditAnywhere)</li>
    <li><code>MaxStackSize</code> - Max stack size. (Read Only, EditAnywhere)</li>
    <li><code>Rarity</code> - Rarity (integer). (Read Only, EditAnywhere)</li>
  </ul>

  <h3>UStatsComponent</h3>
  <ul>
    <li><code>MaxHealth</code> - Maximum health. (Read Only)</li>
    <li><code>Health</code> - Current health. (Read Only)</li>
    <li><code>MaxStamina</code> - Maximum stamina. (Read Only)</li>
    <li><code>Stamina</code> - Current stamina. (Read Only)</li>
    <li><code>TakeDamage(float Amount)</code> - Damages the owner. (Callable)</li>
    <li><code>Heal(float Amount)</code> - Heals the owner. (Callable)</li>
    <li><code>UseStamina(float Amount)</code> - Uses stamina. (Callable)</li>
  </ul>

  <h3>AFarmerCharacter</h3>
  <ul>
    <li><code>InventoryComponent</code> - Inventory component (Read Only)</li>
    <li><code>StatsComponent</code> - Stats component (Read Only)</li>
    <li><code>Interact()</code> - Interact with world. (Callable)</li>
    <li><code>Harvest()</code> - Harvest nearby resource. (Callable)</li>
    <li><code>UseItem(UItemData* Item)</code> - Use an item. (Callable)</li>
    <li><code>DropItem(UItemData* Item, int32 Quantity)</code> - Drop an item. (Callable)</li>
  </ul>

  <h3>ATreeActor</h3>
  <ul>
    <li><code>Health</code> - Tree’s current health (EditAnywhere, BlueprintReadWrite)</li>
    <li><code>Mesh</code> - Static mesh (EditAnywhere, BlueprintReadWrite)</li>
    <li><code>DropActorClass</code> - The class of actor to spawn as drop (EditAnywhere, BlueprintReadWrite)</li>
    <li><code>DropSpawnOffset</code> - Drop spawn offset (EditAnywhere, BlueprintReadWrite)</li>
    <li><code>LogsToDrop</code> - How many logs to drop (EditAnywhere, BlueprintReadWrite)</li>
    <li><code>ReceiveDamage(float Amount)</code> - Applies damage (Implements <code>DamageableInterface</code>, Callable in BP via interface)</li>
    <li><code>OnChoppedDown_BP()</code> - BlueprintImplementableEvent (BP: Play VFX, sound, etc on chop)</li>
  </ul>

  <h3>ADroppedItem</h3>
  <ul>
    <li><code>ItemID</code> - The row name of the item in the ItemData table. (EditAnywhere, BlueprintReadWrite)</li>
    <li><code>Quantity</code> - Number of items in this pickup. (EditAnywhere, BlueprintReadWrite)</li>
    <li><code>PickUp()</code> - Call to add this to inventory and destroy. (Callable, BPNativeEvent)</li>
  </ul>

  <h3>UInventorySlotWidget</h3>
  <ul>
    <li><code>SetSlotData(FInventorySlot)</code> - Set slot’s visual and logical data. (Callable from C++/BP)</li>
    <li><code>SetParentInventoryWidget(UInventoryWidget*)</code> - Link slot to its parent inventory UI. (Callable)</li>
    <li><code>NativeOnMouseButtonDown</code> - Handles mouse input for drag or split (shift+drag).</li>
    <li><code>NativeOnDragDetected</code> - Initiates drag or split-drag (for stack splitting).</li>
    <li><code>NativeOnDrop</code> - Handles drop (including stack splitting logic).</li>
  </ul>

  <h2>Workflow</h2>
  <h3>Inventory Management</h3>
  <ul>
    <li>Collect item &rarr; Spawn as <code>DroppedItem</code> &rarr; Player overlap &rarr; Added to <code>InventoryComponent</code> &rarr; UI (<code>InventoryWidget</code>) updated automatically. DroppedItem actor destroys itself on pickup success.</li>
    <li><b>Shift+Drag</b> inventory slot to split stack: drag half the stack to another slot, supporting intuitive stack management.</li>
  </ul>
  <h3>Resource Harvesting</h3>
  <ul>
    <li>Interact with <code>TreeActor</code> &rarr; Apply damage via <code>DamageableInterface</code> &rarr; Resource depleted &rarr; Spawn <code>DroppedItem</code> (logs, variable amount) &rarr; Collect loot &rarr; Inventory updated.</li>
  </ul>
  <h3>Player Stats Interaction</h3>
  <ul>
    <li>Player actions modify <code>StatsComponent</code> &rarr; Health/Stamina updated &rarr; UI and gameplay reflect changes dynamically.</li>
  </ul>
  <hr>

  <h2>Roadmap</h2>
  <ul>
    <li>Crafting system.</li>
    <li>Additional resource types (rocks, minerals).</li>
    <li>Advanced combat mechanics with enemy AI.</li>
    <li>Farming mechanics (crop planting, growth management).</li>
    <li>UI/UX improvements with polished interactions.</li>
    <li>Comprehensive audio integration (environment, actions, feedback).</li>
  </ul>
  <hr>

  <h2>Contributing</h2>
  <p>
    Fork the repository on GitHub, create a feature branch, and submit a pull request with your changes.
  </p>
  <hr>
  <p><em>Last updated: July 31, 2025</em></p>
</body>
</html>
